{% extends 'base.html.twig' %}

{% block title %}Trick
{% endblock %}

{% block body %}
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-10 col-md-offset-1 mb-4">
				<h1 class="text-center my-3">Trick :
					{{ trick.name }}</h1>
				<div class="card mt-5">
					<img class="display-top img-fluid" src="{{ asset('uploads/' ~ trick.pictures|first)}}" alt="{{trick.name}}">
					<div class="card-body">
						Par :
						{{ trick.user }}
						| Ajouté le :
						{{ trick.createdAt ? trick.createdAt|date('d/m/Y à h\\hi') : '' }}
						| Catégorie :
						{{ trick.category }}
						| Commentaires :
						{{ trick.comments|length }}
					</div>
					<p>{{ trick.description|raw }}</p>

					<div>
						{% for picture in trick.pictures %}
							<a href="{{ asset('uploads/' ~ picture)}}" target="_blank">
								<img class="display-top img-fluid" src="{{ asset('uploads/' ~ picture)}}" alt="{{ picture.subtitle }}">
							</a>
						{% endfor %}
					</div>


					<!--COMMENTAIRES-->


					<div class="container">
						<div class="row">

							<div class="col">

								<button onclick="test" class="btn btn-dark-left-align">Commentaires</button>
								<div id="test" class="deroul">
									{% for comment in  trick.comments %}
										<div class="card mb-2">
											<div class="row">
												<div class="col-md-2" id="photo_comment">
													<img src="{{ asset('build/images/avatarmin.jpg')}}" text-center>
												</div>

												<div class="col-md-9">
													<div class="card-body" id="list_comment">
														<p>{{ comment.content|raw }}</p>
														<p>écrit le :
															{{ comment.createdAt ? comment.createdAt|date('d/m/Y') : '' }}
															par :
															{{ comment.pseudo|raw }}</p>
													</div>
												</div>
											</div>
										</div>
										</div> {% endfor %}
									</div>

									<div class="row">
										<h4>Ajouter un commentaire</h4>
										<div class="card-body">
											{{ form_start(commentForm) }}
											{{ form_widget(commentForm)}}
											<button type="submit" class="btn btn-primary" style="width:150px">Envoyer</button>
											{{ form_end(commentForm) }}
										</div>

									</div>
								</div>

								<div class="row justify-content-around">
									<a href="{{ path('trick_index') }}" class="btn btn-secondary" style="width:150px">back to list</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		{% endblock %}
		{% block javascript %}
			<script>
				function myFunction(id) {
var x = document.getElementById(id);
if (x.className.indexOf("test") == -1) {
x.className += " test ";
} else {
x.className = x.className.replace("test", "");
}
}
			</script>
		{% endblock %}
